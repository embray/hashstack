extends: [autotools_package]

dependencies:
  build: [libiconv]

build_stages:
  - when: platform == 'Cygwin'
    name: patch
    before: configure
    files: [cygwin.patch]
    handler: bash
    bash: |
      patch -up1 < _hashdist/cygwin.patch

sources:
- url: http://ftp.gnu.org/pub/gnu/gettext/gettext-0.19.1.tar.gz
  key: tar.gz:fb2hdwk335p6wsdcmjd73rjqmyhd2kig

defaults:
  # /share/doc/gettext/examples/installpaths contains absolute path
  relocatable: false

when_build_dependency:
- prepend_path: PATH
  value: '${ARTIFACT}/bin'
